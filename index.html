<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Medical Audio Assessment Study</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    :root {
      --navy: #001f4d;
      --navy-light: #00509e;
      --navy-bg: #f6f8fa;
      --accent: #e5eefa;
      --border: #e0e6ed;
      --button-bg: #f3f6fa;
      --button-hover: #00509e;
      --button-active: #001f4d;
      --text: #001f4d;
      --shadow: 0 4px 24px rgba(0, 31, 77, 0.06);
      --radius: 16px;
    }
    html, body {
      margin: 0;
      padding: 0;
      background: #fff;
      color: var(--text);
      font-family: 'SF Pro Display', 'Segoe UI', Arial, sans-serif;
      font-size: 18px;
      line-height: 1.6;
    }
    .container {
      max-width: 700px;
      margin: 3em auto;
      background: #fff;
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      padding: 2.5em 2em 2em 2em;
    }
    h1 {
      color: var(--navy);
      font-size: 2.2rem;
      font-weight: 700;
      text-align: center;
      margin-bottom: 0.7em;
      letter-spacing: -0.01em;
    }
    .about-section {
      margin-bottom: 2em;
      border-radius: var(--radius);
      background: var(--navy-bg);
      border: 1px solid var(--border);
      box-shadow: 0 2px 8px rgba(0,31,77,0.04);
    }
    details[open] summary::after {
      transform: rotate(90deg);
    }
    details summary {
      font-size: 1.1em;
      font-weight: 600;
      color: var(--navy-light);
      cursor: pointer;
      padding: 1.1em 1.2em 1.1em 1.2em;
      border-radius: var(--radius);
      outline: none;
      user-select: none;
      transition: background 0.2s;
      position: relative;
    }
    details summary::after {
      content: '';
      display: inline-block;
      border: solid var(--navy-light);
      border-width: 0 3px 3px 0;
      padding: 5px;
      margin-left: 10px;
      transform: rotate(45deg);
      vertical-align: middle;
      transition: transform 0.2s;
    }
    details[open] summary {
      background: #e5eefa;
    }
    .about-content {
      padding: 0 1.2em 1.2em 1.2em;
      color: var(--text);
      font-size: 1em;
    }
    .notice {
      background: var(--accent);
      color: var(--navy);
      border-left: 4px solid var(--navy-light);
      padding: 1em 1.2em;
      border-radius: 10px;
      margin-bottom: 2em;
      font-size: 1em;
      font-weight: 500;
    }
    .question-card {
      background: #fff;
      border: 1.5px solid var(--border);
      border-radius: var(--radius);
      padding: 2em 1.5em 1.5em 1.5em;
      margin-bottom: 2em;
      box-shadow: 0 1px 6px rgba(0,31,77,0.03);
      transition: border-color 0.2s;
    }
    .question-card:hover {
      border-color: var(--navy-light);
    }
    .question-title {
      font-size: 1.13em;
      font-weight: 600;
      margin-bottom: 1.1em;
      color: var(--navy);
      letter-spacing: -0.01em;
    }
    .audio-row {
      display: flex;
      gap: 1.5em;
      flex-wrap: wrap;
      margin-bottom: 1.4em;
      justify-content: flex-start;
    }
    .audio-block {
      flex: 1 1 180px;
      min-width: 160px;
      background: var(--navy-bg);
      padding: 1.1em 1em 1em 1em;
      border-radius: 12px;
      text-align: center;
      box-shadow: 0 1px 5px rgba(0,31,77,0.07);
    }
    .audio-label {
      font-weight: 700;
      margin-bottom: 0.5em;
      display: block;
      color: var(--navy-light);
      font-size: 1.05em;
      letter-spacing: 0.01em;
    }
    .audio-controls {
      display: flex;
      justify-content: center;
      gap: 1em;
      margin-top: 0.7em;
    }
    .play-btn, .pause-btn {
      font-size: 1.12em;
      font-weight: 600;
      padding: 0.75em 2.1em;
      border: none;
      border-radius: 24px;
      background: var(--navy-light);
      color: #fff;
      cursor: pointer;
      transition: background 0.2s;
      display: flex;
      align-items: center;
      gap: 0.5em;
      outline: none;
      box-shadow: 0 2px 8px rgba(0,31,77,0.07);
    }
    .play-btn:hover, .play-btn:focus,
    .pause-btn:hover, .pause-btn:focus {
      background: var(--navy);
    }
    .answer-row {
      display: flex;
      gap: 1em;
      margin-top: 0.5em;
      justify-content: flex-start;
      flex-wrap: wrap;
    }
    .answer-btn {
      flex: 1 1 140px;
      background: var(--button-bg);
      border: 2px solid var(--button-bg);
      border-radius: 14px;
      padding: 1em 1em;
      font-size: 1.08em;
      font-weight: 600;
      color: var(--navy);
      text-align: center;
      cursor: pointer;
      transition: background 0.2s, border-color 0.2s, color 0.2s;
      user-select: none;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 0.5em;
    }
    .answer-btn:hover, .answer-btn:focus {
      background: var(--navy-light);
      border-color: var(--navy-light);
      color: #fff;
    }
    .answer-btn.selected {
      background: var(--navy);
      border-color: var(--navy);
      color: #fff;
      box-shadow: 0 0 8px rgba(0, 31, 77, 0.08);
    }
    .question-card input[type="radio"] {
      display: none;
    }
    button[type="submit"] {
      display: block;
      margin: 2.5em auto 0 auto;
      background: var(--navy-light);
      color: #fff;
      font-size: 1.2rem;
      border: none;
      border-radius: 28px;
      padding: 1em 3em;
      font-weight: 700;
      cursor: pointer;
      transition: background 0.2s;
      user-select: none;
      letter-spacing: 0.01em;
    }
    button[type="submit"]:hover, button[type="submit"]:focus {
      background: var(--navy);
    }
    .result {
      background: var(--accent);
      padding: 1.2em;
      margin-top: 2em;
      color: var(--navy);
      border-radius: 12px;
      text-align: center;
      font-size: 1.12rem;
      font-weight: 600;
      box-shadow: 0 0 12px rgba(0, 31, 77, 0.09);
    }
    @media (max-width: 600px) {
      .container { margin: 1em; padding: 1.2em; }
      .audio-row { flex-direction: column; }
      .audio-block { min-width: unset; }
      .answer-row { flex-direction: column; }
      .answer-btn { flex: 1 1 auto; }
    }
    /* Hide audio timeline and time displays */
    audio::-webkit-media-controls-timeline,
    audio::-webkit-media-controls-current-time-display,
    audio::-webkit-media-controls-time-remaining-display,
    audio::-webkit-media-controls-seek-back-button,
    audio::-webkit-media-controls-seek-forward-button {
      display: none !important;
    }
    audio::-moz-range-thumb { visibility: hidden; }
    audio::-ms-fill-lower,
    audio::-ms-fill-upper { display: none !important; }
  </style>
</head>
<body>
  <div class="container">
    <h1>Medical Audio Assessment Study</h1>
    <div class="about-section">
      <details>
        <summary>About this Study</summary>
        <div class="about-content">
          <p>
            <strong>Purpose:</strong> This study examines the effectiveness of audio-based assessments in medical education, with a focus on pediatric respiratory health.
          </p>
          <p>
            <strong>Background:</strong> Recent advances in biomedical research have identified vocal biomarkers that may assist in detecting and monitoring pathological conditions. This study explores how audio recordings can support clinical training and diagnostic accuracy.
          </p>
          <p>
            <strong>Your Participation:</strong> You will listen to a series of audio clips. Some are from healthy infants, while others feature underlying respiratory pathology. For each pair, please identify the healthy or pathological example as instructed.
          </p>
          <p>
            <strong>Data Privacy:</strong> All responses are fully de-identified. No personal or identifying information will be collected or published.
          </p>
        </div>
      </details>
    </div>
    <div class="notice">
      <strong>Privacy Notice:</strong> Your responses are anonymous and will be used exclusively for research purposes.
    </div>
    <form id="surveyForm" action="https://formspree.io/f/xnnvrpzd" method="POST">

      <div class="question-card">
        <div class="question-title">Are you a medical professional?</div>
        <div class="answer-row">
          <label class="answer-btn" id="pro-yes">
            <input type="radio" name="medical_professional" value="Yes" required /> Yes
          </label>
          <label class="answer-btn" id="pro-no">
            <input type="radio" name="medical_professional" value="No" required /> No
          </label>
        </div>
      </div>

      <!-- Question 1 -->
      <div class="question-card">
        <div class="question-title">
          1. For each audio pair, one recording is from a completely healthy infant and the other features underlying respiratory pathology. Please listen to both clips and select the audio that you believe is healthy.
        </div>
        <div class="audio-row">
          <div class="audio-block">
            <span class="audio-label">Audio A</span>
            <audio id="audio1A" src="https://echan2709.github.io/finalaudiotrainingstudyproject/healthybabycry.mp3?v=2"></audio>
            <div class="audio-controls">
              <button type="button" class="play-btn" onclick="playAudio('audio1A')">⏵ Play</button>
              <button type="button" class="pause-btn" onclick="pauseAudio('audio1A')">⏸ Pause</button>
            </div>
          </div>
          <div class="audio-block">
            <span class="audio-label">Audio B</span>
            <audio id="audio1B" src="https://echan2709.github.io/finalaudiotrainingstudyproject/cryingsoftgrunting.mp3?v=2"></audio>
            <div class="audio-controls">
              <button type="button" class="play-btn" onclick="playAudio('audio1B')">⏵ Play</button>
              <button type="button" class="pause-btn" onclick="pauseAudio('audio1B')">⏸ Pause</button>
            </div>
          </div>
        </div>
        <div class="answer-row" role="radiogroup" aria-label="Select which audio sounds healthy for question 1">
          <label class="answer-btn">
            <input type="radio" name="q1" value="A" required />
            Audio A is healthy
          </label>
          <label class="answer-btn">
            <input type="radio" name="q1" value="B" required />
            Audio B is healthy
          </label>
        </div>
      </div>

      <!-- Question 2 -->
      <div class="question-card">
        <div class="question-title">
          2. For each audio pair, one recording is from a completely healthy infant and the other features underlying respiratory pathology. Please listen to both clips and select the audio that you believe is healthy.
        </div>
        <div class="audio-row">
          <div class="audio-block">
            <span class="audio-label">Audio A</span>
            <audio id="audio2A" src="https://echan2709.github.io/finalaudiotrainingstudyproject/healthybabycry.mp3?v=2"></audio>
            <div class="audio-controls">
              <button type="button" class="play-btn" onclick="playAudio('audio2A')">⏵ Play</button>
              <button type="button" class="pause-btn" onclick="pauseAudio('audio2A')">⏸ Pause</button>
            </div>
          </div>
          <div class="audio-block">
            <span class="audio-label">Audio B</span>
            <audio id="audio2B" src="https://echan2709.github.io/finalaudiotrainingstudyproject/cryingstronggrunting.mp3?v=2"></audio>
            <div class="audio-controls">
              <button type="button" class="play-btn" onclick="playAudio('audio2B')">⏵ Play</button>
              <button type="button" class="pause-btn" onclick="pauseAudio('audio2B')">⏸ Pause</button>
            </div>
          </div>
        </div>
        <div class="answer-row" role="radiogroup" aria-label="Select which audio sounds healthy for question 2">
          <label class="answer-btn">
            <input type="radio" name="q2" value="A" required />
            Audio A is healthy
          </label>
          <label class="answer-btn">
            <input type="radio" name="q2" value="B" required />
            Audio B is healthy
          </label>
        </div>
      </div>

      <!-- Question 3 -->
      <div class="question-card">
        <div class="question-title">
          3. For each audio pair, one recording is from a completely healthy infant and the other features underlying respiratory pathology. Please listen to both clips and select the audio that you believe is healthy.
        </div>
        <div class="audio-row">
          <div class="audio-block">
            <span class="audio-label">Audio A</span>
            <audio id="audio3A" src="https://echan2709.github.io/finalaudiotrainingstudyproject/healthybabycry.mp3?v=2"></audio>
            <div class="audio-controls">
              <button type="button" class="play-btn" onclick="playAudio('audio3A')">⏵ Play</button>
              <button type="button" class="pause-btn" onclick="pauseAudio('audio3A')">⏸ Pause</button>
            </div>
          </div>
          <div class="audio-block">
            <span class="audio-label">Audio B</span>
            <audio id="audio3B" src="https://echan2709.github.io/finalaudiotrainingstudyproject/cryingstrider.mp3?v=2"></audio>
            <div class="audio-controls">
              <button type="button" class="play-btn" onclick="playAudio('audio3B')">⏵ Play</button>
              <button type="button" class="pause-btn" onclick="pauseAudio('audio3B')">⏸ Pause</button>
            </div>
          </div>
        </div>
        <div class="answer-row" role="radiogroup" aria-label="Select which audio sounds healthy for question 3">
          <label class="answer-btn">
            <input type="radio" name="q3" value="A" required />
            Audio A is healthy
          </label>
          <label class="answer-btn">
            <input type="radio" name="q3" value="B" required />
            Audio B is healthy
          </label>
        </div>
      </div>

      <!-- Question 4 -->
      <div class="question-card">
        <div class="question-title">
          4. For the following pair, which audio sounds like the infant is in a higher state of distress?
        </div>
        <div class="audio-row">
          <div class="audio-block">
            <span class="audio-label">Audio A</span>
            <audio id="audio4A" src="https://echan2709.github.io/finalaudiotrainingstudyproject/cryingsoftgrunting.mp3?v=2"></audio>
            <div class="audio-controls">
              <button type="button" class="play-btn" onclick="playAudio('audio4A')">⏵ Play</button>
              <button type="button" class="pause-btn" onclick="pauseAudio('audio4A')">⏸ Pause</button>
            </div>
          </div>
          <div class="audio-block">
            <span class="audio-label">Audio B</span>
            <audio id="audio4B" src="https://echan2709.github.io/finalaudiotrainingstudyproject/cryingstronggrunting.mp3?v=2"></audio>
            <div class="audio-controls">
              <button type="button" class="play-btn" onclick="playAudio('audio4B')">⏵ Play</button>
              <button type="button" class="pause-btn" onclick="pauseAudio('audio4B')">⏸ Pause</button>
            </div>
          </div>
        </div>
        <div class="answer-row" role="radiogroup" aria-label="Select which audio is in higher distress for question 4">
          <label class="answer-btn">
            <input type="radio" name="q4" value="A" required />
            Audio A is in higher distress
          </label>
          <label class="answer-btn">
            <input type="radio" name="q4" value="B" required />
            Audio B is in higher distress
          </label>
        </div>
      </div>

      <!-- Question 5 -->
      <div class="question-card">
        <div class="question-title">
          5. For the following pair, which audio sounds like the infant has respiratory problems?
        </div>
        <div class="audio-row">
          <div class="audio-block">
            <span class="audio-label">Audio A</span>
            <audio id="audio5A" src="https://echan2709.github.io/finalaudiotrainingstudyproject/cryingstronggrunting.mp3?v=2"></audio>
            <div class="audio-controls">
              <button type="button" class="play-btn" onclick="playAudio('audio5A')">⏵ Play</button>
              <button type="button" class="pause-btn" onclick="pauseAudio('audio5A')">⏸ Pause</button>
            </div>
          </div>
          <div class="audio-block">
            <span class="audio-label">Audio B</span>
            <audio id="audio5B" src="https://echan2709.github.io/finalaudiotrainingstudyproject/cryingstrider.mp3?v=2"></audio>
            <div class="audio-controls">
              <button type="button" class="play-btn" onclick="playAudio('audio5B')">⏵ Play</button>
              <button type="button" class="pause-btn" onclick="pauseAudio('audio5B')">⏸ Pause</button>
            </div>
          </div>
        </div>
        <div class="answer-row" role="radiogroup" aria-label="Select which audio has respiratory problems for question 5">
          <label class="answer-btn">
            <input type="radio" name="q5" value="A" required />
            Audio A has respiratory problems
          </label>
          <label class="answer-btn">
            <input type="radio" name="q5" value="B" required />
            Audio B has respiratory problems
          </label>
        </div>
      </div>

      <div id="thankyou" class="result" style="display:none;">
        Thank you for participating. Your responses have been submitted.
      </div>
      <button type="submit" id="submitBtn">Submit</button>
    </form>
  </div>
  <script>
    // Play/pause audio and pause others
    function playAudio(id) {
      document.querySelectorAll('audio').forEach(aud => {
        if (aud.id !== id) aud.pause();
      });
      document.getElementById(id).play();
    }
    function pauseAudio(id) {
      document.getElementById(id).pause();
    }

    // Highlight selected answer
    document.querySelectorAll('.answer-row').forEach(row => {
      row.addEventListener('change', function (e) {
        if (e.target.type === 'radio') {
          row.querySelectorAll('.answer-btn').forEach(btn => btn.classList.remove('selected'));
          e.target.closest('.answer-btn').classList.add('selected');
        }
      });
    });
    // Medical professional highlight
    document.getElementById('pro-yes').addEventListener('click', function () {
      document.getElementById('pro-yes').classList.add('selected');
      document.getElementById('pro-no').classList.remove('selected');
    });
    document.getElementById('pro-no').addEventListener('click', function () {
      document.getElementById('pro-no').classList.add('selected');
      document.getElementById('pro-yes').classList.remove('selected');
    });

    // AJAX form submit
    document.getElementById('surveyForm').addEventListener('submit', function (e) {
      e.preventDefault();
      var form = this;
      var data = new FormData(form);
      var xhr = new XMLHttpRequest();
      xhr.open(form.method, form.action);
      xhr.setRequestHeader('Accept', 'application/json');
      xhr.onreadystatechange = function () {
        if (xhr.readyState !== XMLHttpRequest.DONE) return;
        form.reset();
        document.getElementById('thankyou').style.display = 'block';
        document.getElementById('submitBtn').style.display = 'none';
        document.querySelectorAll('.answer-btn').forEach(btn => btn.classList.remove('selected'));
      };
      xhr.send(data);
    });
  </script>
</body>
</html>
